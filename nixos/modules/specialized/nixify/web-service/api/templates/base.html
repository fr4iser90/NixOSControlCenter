<!DOCTYPE html>
<html lang="{{.Lang}}">
<head>
    <title>{{.T "meta.title"}}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{.T "meta.description"}}">
    <!-- Base CSS - Always loaded -->
    <link rel="stylesheet" href="/static/css/base.css" nonce="{{.Nonce}}">
    <!-- Page-specific CSS -->
    {{if eq .CurrentPath "/"}}
    <link rel="stylesheet" href="/static/css/index.css" nonce="{{.Nonce}}">
    {{else if eq .CurrentPath "/mappings"}}
    <link rel="stylesheet" href="/static/css/mappings.css" nonce="{{.Nonce}}">
    {{else if eq .CurrentPath "/games"}}
    <link rel="stylesheet" href="/static/css/games.css" nonce="{{.Nonce}}">
    {{else if eq .CurrentPath "/about"}}
    <link rel="stylesheet" href="/static/css/about.css" nonce="{{.Nonce}}">
    {{else if eq .CurrentPath "/modules"}}
    <link rel="stylesheet" href="/static/css/modules.css" nonce="{{.Nonce}}">
    {{else if hasPrefix .CurrentPath "/module/"}}
    <link rel="stylesheet" href="/static/css/module-detail.css" nonce="{{.Nonce}}">
    {{else if hasPrefix .CurrentPath "/review/"}}
    <link rel="stylesheet" href="/static/css/review.css" nonce="{{.Nonce}}">
    {{end}}
    {{block "styles" .}}{{end}}
</head>
<body>
    <nav>
        <a href="/" class="nav-brand">ðŸš€ Nixify</a>
        <div class="nav-links">
            <a href="/" class="{{if eq .CurrentPath "/"}}active{{end}}">{{.T "nav.home"}}</a>
            <a href="/mappings" class="{{if eq .CurrentPath "/mappings"}}active{{end}}">{{.T "nav.mappings"}}</a>
            <a href="/games" class="{{if eq .CurrentPath "/games"}}active{{end}}">{{.T "nav.games"}}</a>
            <a href="/modules" class="{{if or (eq .CurrentPath "/modules") (hasPrefix .CurrentPath "/module/")}}active{{end}}">{{.T "nav.modules"}}</a>
            <a href="/about" class="{{if eq .CurrentPath "/about"}}active{{end}}">{{.T "nav.about"}}</a>
        </div>
        <div class="lang-selector">
            <label for="lang-select">{{.T "nav.select_language"}}:</label>
            <select id="lang-select" onchange="changeLanguage(this.value)">
                <option value="en" {{if eq .Lang "en"}}selected{{end}}>English</option>
                <option value="de" {{if eq .Lang "de"}}selected{{end}}>Deutsch</option>
                <option value="fr" {{if eq .Lang "fr"}}selected{{end}}>FranÃ§ais</option>
                <option value="es" {{if eq .Lang "es"}}selected{{end}}>EspaÃ±ol</option>
            </select>
        </div>
    </nav>
    
    <div class="main-content">
        {{if eq .CurrentPath "/mappings"}}
            {{template "mappings" .}}
        {{else if eq .CurrentPath "/games"}}
            {{template "games" .}}
        {{else if eq .CurrentPath "/modules"}}
            {{template "modules" .}}
        {{else if hasPrefix .CurrentPath "/module/"}}
            {{template "module-detail" .}}
        {{else if hasPrefix .CurrentPath "/review/"}}
            {{template "review" .}}
        {{else if eq .CurrentPath "/about"}}
            {{template "about" .}}
        {{else}}
            {{template "index" .}}
        {{end}}
    </div>
    
    <footer>
        <p>{{.T "footer.project"}} <a href="https://github.com/fr4iser90/NixOSControlCenter" target="_blank">NixOS Control Center</a></p>
        <p class="footer-tagline">{{.T "footer.tagline"}}</p>
    </footer>
    
    <script nonce="{{.Nonce}}">
        function changeLanguage(lang) {
            document.cookie = `lang=${lang}; path=/; max-age=31536000`; // 1 year
            window.location.reload();
        }
    </script>
    {{block "scripts" .}}{{end}}
</body>
</html>
